(function(t){function a(a){for(var r,o,s=a[0],d=a[1],c=a[2],l=0,p=[];l<s.length;l++)o=s[l],n[o]&&p.push(n[o][0]),n[o]=0;for(r in d)Object.prototype.hasOwnProperty.call(d,r)&&(t[r]=d[r]);u&&u(a);while(p.length)p.shift()();return i.push.apply(i,c||[]),e()}function e(){for(var t,a=0;a<i.length;a++){for(var e=i[a],r=!0,s=1;s<e.length;s++){var d=e[s];0!==n[d]&&(r=!1)}r&&(i.splice(a--,1),t=o(o.s=e[0]))}return t}var r={},n={app:0},i=[];function o(a){if(r[a])return r[a].exports;var e=r[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=r,o.d=function(t,a,e){o.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,a){if(1&a&&(t=o(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(o.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)o.d(e,r,function(a){return t[a]}.bind(null,r));return e},o.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(a,"a",a),a},o.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],d=s.push.bind(s);s.push=a,s=s.slice();for(var c=0;c<s.length;c++)a(s[c]);var u=d;i.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"034f":function(t,a,e){"use strict";var r=e("64a9"),n=e.n(r);n.a},"05a0":function(t,a,e){},"0fa4":function(t,a,e){"use strict";var r=e("05a0"),n=e.n(r);n.a},"56d7":function(t,a,e){"use strict";e.r(a);e("cadf"),e("551c"),e("f751"),e("097d");var r=e("2b0e"),n=e("bc3a"),i=e.n(n),o={},s=i.a.create(o);s.interceptors.request.use(function(t){return t},function(t){return Promise.reject(t)}),s.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)}),Plugin.install=function(t){t.axios=s,window.axios=s,Object.defineProperties(t.prototype,{axios:{get:function(){return s}},$axios:{get:function(){return s}}})},r["a"].use(Plugin);Plugin;var d=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{attrs:{id:"app"}},[e("div",{staticStyle:{width:"100%"}},[e("router-view")],1)])},c=[],u={name:"App"},l=u,p=(e("034f"),e("2877")),f=Object(p["a"])(l,d,c,!1,null,null,null),h=f.exports,v=e("8c4f"),m=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticStyle:{width:"100%","background-color":"white"}},[t.histogramchartdata?e("div",[e("HistogramChart",{attrs:{data:t.histogramchartdata,dateType:t.dateType}})],1):t._e(),t.barchartdata?e("div",[e("BarChart",{attrs:{data:t.barchartdata,dateType:t.dateType}})],1):t._e(),t.chartdata?e("div",[e("LineChart",{attrs:{data:t.chartdata,dateType:t.dateType}}),e("NewBarChart",{attrs:{data:t.chartdata,dateType:t.dateType}})],1):t._e(),e("v-select",{staticStyle:{width:"15%","margin-left":"37%"},attrs:{options:t.dateTypeArr},model:{value:t.dateType,callback:function(a){t.dateType=a},expression:"dateType"}})],1)])},g=[],y=(e("6b54"),function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("svg",{ref:t.id,staticStyle:{"background-color":"whitesmoke"}})])}),x=[],b=(e("7f7f"),e("55dd"),e("ac6a"),e("5698"));function w(t,a,e,r,n){var i=b["a"](t).ticks(5),o=b["b"](a).ticks(3);e.append("g").attr("class","x axis").attr("transform","translate(0, ".concat(r-n,")")).call(i),e.append("g").attr("class","y axis").call(o).append("text").attr("y",-5).attr("x",-5).attr("transform","rotate(0)").attr("fill","#000").text("單價")}var T=w;function j(t){var a=["日","月","年"],e=["%d","%m","%Y"],r="";for(var n in a)t==a[n]&&(r=e[n]);return r}var _=j,O={props:["data","dateType"],data:function(){return{id:""}},mounted:function(){this.drawChart()},methods:{drawChart:function(){b["l"](this.$refs[this.id]).html("");var t=350,a=300,e=50,r=250,n="0.25",i="0.85",o="0.1",s="1.5px",d="2.5px",c="0.85",u="0.25",l=3,p=6,f=this.data,h=_(this.dateType),v=b["n"](h),m=[];f.forEach(function(t){t.values.forEach(function(t){var a=new Date(t.date);t.date=v(a),m.push(t.date)})});var g=m.filter(function(t,a,e){return e.indexOf(t)===a});g=g.sort();var y=[];for(var x in f)for(var w in f[x].values)y.push(f[x].values[w].price);var j=b["h"]().domain(g).range([0,t-e]),O=b["i"]().domain(b["c"](y)).range([a-e,0]),k=b["j"](b["k"]),C=b["l"](this.$refs[this.id]).attr("width",t+e+"px").attr("height",a+e+"px").append("g").attr("transform","translate(".concat(e,", ").concat(e,")")),A=b["d"]().defined(function(t){return null!=t.price}).x(function(a){return j(a.date)+(t-e)/10-10}).y(function(t){return O(t.price)}),S=C.append("g").attr("class","lines"),$=S.selectAll(".line-group").data(f);$.enter().append("g").attr("class","line-group").on("mouseover",function(a,r){C.append("text").attr("class","title-text").style("fill",k(r)).text(a.name).attr("text-anchor","middle").attr("x",(t-e)/2).attr("y",5)}).on("mouseout",function(){C.select(".title-text").remove()}).append("path").attr("class","line").attr("d",function(t){return A(t.values)}).style("stroke",function(t,a){return k(a)}).style("opacity",n).on("mouseover",function(){b["m"](".line").style("opacity",o),b["m"](".circle").style("opacity",u),b["l"](this).style("opacity",i).style("stroke-width",d).style("cursor","pointer")}).on("mouseout",function(){b["m"](".line").style("opacity",n),b["m"](".circle").style("opacity",c),b["l"](this).style("stroke-width",s).style("cursor","none")}),S.selectAll("circle-group").data(f).enter().append("g").style("fill",function(t,a){return k(a)}).selectAll("circle").data(function(t){return t.values}).enter().append("g").attr("class","circle").on("mouseover",function(t){b["l"](this).style("cursor","pointer").append("text").attr("class","text").text("".concat(t.price)).attr("x",function(t){return j(t.date)+5}).attr("y",function(t){return O(t.price)-10})}).on("mouseout",function(){b["l"](this).style("cursor","none").transition().duration(r).selectAll(".text").remove()}).append("circle").attr("cx",function(a){return j(a.date)+(t-e)/10-10}).attr("cy",function(t){return O(t.price)}).attr("r",l).style("opacity",c).on("mouseover",function(){b["l"](this).transition().duration(r).attr("r",p)}).on("mouseout",function(){b["l"](this).transition().duration(r).attr("r",l)}),T(j,O,C,a,e),C.append("text").attr("transform","translate(".concat(t/2,",").concat(a-10,")")).style("text-anchor","middle").text("最高標借單價".concat(this.dateType,"統計圖")),C.append("text").attr("x",t/2).attr("y",-30).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline")}},watch:{data:"drawChart"}},k=O,C=(e("f968"),Object(p["a"])(k,y,x,!1,null,null,null)),A=C.exports,S=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("svg",{ref:t.id,staticStyle:{"background-color":"azure"}})])},$=[],P=e("75fc"),E={data:function(){return{id:""}},props:["data","dateType"],mounted:function(){this.drawChart()},methods:{drawChart:function(){var t;b["l"](this.$refs[this.id]).html("");var a=this.data;console.log(a);var e=_(this.dateType),r=b["n"](e);for(var n in a.date){var i=new Date(a.date[n]);a.date[n]=r(i)}if(parseInt(a.date[0])>parseInt(a.date[1]))for(var o in a.date.reverse(),a.value)a.value[o].reverse();for(var s=0;s<a.date.length-1;s++)parseInt(a.date[s])-parseInt(a.date[s+1])<-1&&(a.date.splice(s+1,0,(parseInt(a.date[s])+1).toString()),a.value[0].splice(s+1,0,0));var d=(t=[]).concat.apply(t,Object(P["a"])(a.value)),c={top:20,right:30,bottom:30,left:40},u=350-c.left-c.right,l=300-c.top-c.bottom,p=b["i"]().domain([.9*b["f"](d),b["e"](d)]).range([0,l]),f=b["h"]().domain(b["g"](a.value[0].length)).range([0,u],.2),h=b["h"]().domain(b["g"](a.value.length)).range([0,f.bandwidth()-.1]),v=b["j"](b["k"]),m=b["i"]().domain([b["f"](a.date),(parseInt(b["e"](a.date))+1).toString()]).range([0,u]),g=b["i"]().domain([.9*b["f"](d),b["e"](d)]).range([l,0]),y=b["l"](this.$refs[this.id]).attr("width",u+c.left+c.right).attr("height",l+c.top+c.bottom).append("g").attr("transform","translate("+c.left+","+c.top+")");y.append("g").selectAll("g").data(a.value).enter().append("g").style("fill",function(t,a){return v(a)}).attr("transform",function(t,a){return"translate("+h(a)+",0)"}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("width",h.bandwidth()).attr("height",p).attr("x",function(t,a){return f(a)}).attr("y",function(t){return l-p(t)}),T(m,g,y,l,0)}},watch:{data:"drawChart"}},D=E,I=(e("fc79"),Object(p["a"])(D,S,$,!1,null,"eebb5cb4",null)),B=I.exports,M=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("svg",{ref:t.id,staticStyle:{"background-color":"whitesmoke"}})])},z=[],H={props:["data","dateType"],data:function(){return{id:""}},mounted:function(){this.drawChart()},methods:{drawChart:function(){b["l"](this.$refs[this.id]).html("");var t=350,a=300,e=50,r=this.data;console.log(r);var n=_(this.dateType),i=b["n"](n),o=[];r.forEach(function(t){t.values.forEach(function(t){var a=new Date(t.date);t.date=i(a),o.push(t.date)})});var s=o.filter(function(t,a,e){return e.indexOf(t)===a});s=s.sort(),s.push("2020"),console.log(s);var d=[];for(var c in r)for(var u in r[c].values)d.push(r[c].values[u].price);var l=b["i"]().domain([2013,2020]).range([0,t-e+5]),p=b["i"]().domain(b["c"](d)).range([a-e,0]),f=(b["j"](b["k"]),b["l"](this.$refs[this.id]).attr("width",t+e+"px").attr("height",a+e+"px").append("g").attr("transform","translate(".concat(e,", ").concat(e,")"))),h=b["i"]().domain([0,8]).range([0,a]),v=b["h"]().domain(b["g"](8)).range([0,t],.2),m=b["h"]().domain(b["g"](1)).range([0,v.bandwidth()-.5]),g=b["j"](b["k"]);f.append("g").selectAll("g").data([[3.8395,4.109,4.6795,4.1685,5.026,5.7505,5.285]]).enter().append("g").style("fill",function(t,a){return g(a)}).attr("transform",function(t,a){return"translate("+m(a)+",0)"}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("width",m.bandwidth()).attr("height",h).attr("x",function(t,a){return v(a)}).attr("y",function(t){return a-50-h(t)}),T(l,p,f,a,e),f.append("text").attr("transform","translate(".concat(t/2,",").concat(a-10,")")).style("text-anchor","middle").text("最高標借單價".concat(this.dateType,"統計圖")),f.append("text").attr("x",t/2).attr("y",-30).attr("text-anchor","middle").style("font-size","16px").style("text-decoration","underline")}},watch:{data:"drawChart"}},J=H,L=(e("b043"),Object(p["a"])(J,M,z,!1,null,null,null)),N=L.exports,q=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("svg",{ref:t.id,staticStyle:{"background-color":"mintcream"}})])},Y=[],F={data:function(){return{id:""}},props:["data","dateType"],mounted:function(){this.drawChart()},methods:{drawChart:function(){var t,a;b["l"](this.$refs[this.id]).html("");var e=Object.assign({},this.data),r=_(this.dateType),n=b["n"](r);for(var i in e.date){for(var o in e.date[i]){var s=new Date(e.date[i][o]);e.date[i][o]=n(s)}e.date[i][0]>e.date[i][1]&&(e.date[i].reverse(),e.value[i].reverse())}var d=(t=[]).concat.apply(t,Object(P["a"])(e.date)),c=d.filter(function(t,a,e){return e.indexOf(t)===a});for(var u in c=c.sort(),c)for(var l in e.date)c[u]!=e.date[l][u]&&(e.date[l].splice(u,0,c[u]),e.value[l].splice(u,0,0));var p=(a=[]).concat.apply(a,Object(P["a"])(e.value)),f={top:20,right:30,bottom:30,left:40},h=350-f.left-f.right,v=300-f.top-f.bottom,m=b["i"]().domain([.9*b["f"](p),b["e"](p)]).range([0,v]),g=b["h"]().domain(b["g"](e.value[0].length)).range([0,h],.2),y=b["h"]().domain(b["g"](e.value.length)).range([0,g.bandwidth()-10]),x=b["j"](b["k"]),w=b["h"]().domain(c).range([0,h]),j=b["i"]().domain([.9*b["f"](p),b["e"](p)]).range([v,0]),O=b["l"](this.$refs[this.id]).attr("width",h+f.left+f.right).attr("height",v+f.top+f.bottom).append("g").attr("transform","translate("+f.left+","+f.top+")");O.append("g").attr("transform",function(){return"translate(5,0)"}).selectAll("g").data(e.value).enter().append("g").style("fill",function(t,a){return x(a)}).attr("transform",function(t,a){return"translate("+y(a)+",0)"}).selectAll("rect").data(function(t){return t}).enter().append("rect").attr("width",y.bandwidth()).attr("height",m).attr("x",function(t,a){return g(a)}).attr("y",function(t){return v-m(t)}),T(w,j,O,v,0)}},watch:{data:"drawChart"}},G=F,K=(e("0fa4"),Object(p["a"])(G,q,Y,!1,null,"0a624460",null)),Q=K.exports,R={components:{LineChart:A,HistogramChart:B,BarChart:Q,NewBarChart:N},data:function(){return{data:null,bardata:null,histogramdata:null,box:null,dateTypeArr:["年","月","日"],dateType:null}},mounted:function(){this.dateType="年",this.sendApi(),this.sendApi2()},computed:{chartdata:function(){return!this.data|!this.dateType?null:this.data},histogramchartdata:function(){return!this.histogramdata|!this.dateType?null:this.histogramdata},barchartdata:function(){return!this.bardata|!this.dateType?null:this.bardata}},methods:{sendApi:function(){var t=this,a="0123".concat(this.dateType_en(this.dateType),".json");this.axios.get(a).then(function(a){var e=[];for(var r in a.data){var n={};for(var i in n.name=a.data[r][0]["證券名稱"],n.values=[],a.data[r])if(null!=a.data[r][i]["最高標借單價"]){var o={},s=new Date;s.setTime(a.data[r][i]["標借日期"]),o.date=s.toString(),o.price=a.data[r][i]["最高標借單價"],n.values.push(o)}e.push(n)}t.data=e;var d={name:[],date:[],value:[]};for(var c in a.data){d.name.push(a.data[c][0]["證券名稱"]);var u=[],l=[];for(var p in a.data[c]){var f=new Date;f.setTime(a.data[c][p]["標借日期"]),u.push(f.toString()),null==a.data[c][p]["最高標借單價"]?l.push(0):l.push(a.data[c][p]["最高標借單價"])}d.date.push(u),d.value.push(l)}t.bardata=d},function(a){var e=a.response.status;404===e&&(t.data=null)})},sendApi2:function(){var t=this,a="0050".concat(this.dateType_en(this.dateType),".json");this.axios.get(a).then(function(a){var e={name:[],date:[],value:[]};for(var r in e.value.push([]),e.name.push(a.data[0]["證券名稱"]),a.data){var n=new Date;n.setTime(a.data[r]["標借日期"]),e.date.push(n.toString()),null==a.data[r]["最高標借單價"]?e.value[0].push(0):e.value[0].push(a.data[r]["最高標借單價"])}t.histogramdata=e})},dateType_en:function(t){var a=["year","month","day"],e=["年","月","日"],r="";for(var n in a)t==e[n]&&(r=a[n]);return r}},watch:{dateType:function(t){return!this.data|!t?null:(this.sendApi(),!this.histogramdata|!t?null:void this.sendApi2())}}},U=R,V=Object(p["a"])(U,m,g,!1,null,null,null),W=V.exports;r["a"].use(v["a"]);var X=new v["a"]({mode:"history",base:"",routes:[{path:"/",name:"Home",component:W}]}),Z=e("2f62");r["a"].use(Z["a"]);var tt=new Z["a"].Store({state:{},mutations:{},actions:{}}),at=e("4a7a"),et=e.n(at);e("c408");r["a"].component("v-select",et.a),r["a"].config.productionTip=!1,new r["a"]({router:X,store:tt,render:function(t){return t(h)}}).$mount("#app")},"64a9":function(t,a,e){},a0d6:function(t,a,e){},b043:function(t,a,e){"use strict";var r=e("cf2a"),n=e.n(r);n.a},bcd6:function(t,a,e){},c408:function(t,a,e){},cf2a:function(t,a,e){},f968:function(t,a,e){"use strict";var r=e("a0d6"),n=e.n(r);n.a},fc79:function(t,a,e){"use strict";var r=e("bcd6"),n=e.n(r);n.a}});
//# sourceMappingURL=app.0afffab8.js.map